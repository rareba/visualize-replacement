{
  "uid": "lindas-template",
  "title": "LINDAS Dataset Explorer",
  "description": "Template dashboard for exploring LINDAS RDF datasets. Data is pre-loaded from the web app.",
  "tags": ["lindas", "sparql", "template"],
  "editable": true,
  "schemaVersion": 39,
  "style": "light",
  "timezone": "browser",
  "templating": {
    "list": [
      {
        "name": "cube",
        "type": "textbox",
        "label": "Cube IRI",
        "description": "The IRI of the LINDAS cube",
        "current": { "text": "", "value": "" },
        "hide": 0,
        "skipUrlSync": false
      },
      {
        "name": "query",
        "type": "textbox",
        "label": "Data Query",
        "description": "SPARQL query for observations (passed from web app)",
        "current": { "text": "", "value": "" },
        "hide": 2,
        "skipUrlSync": false
      },
      {
        "name": "dimensionsQuery",
        "type": "textbox",
        "label": "Dimensions Query",
        "description": "SPARQL query for dimension metadata (passed from web app)",
        "current": { "text": "", "value": "" },
        "hide": 2,
        "skipUrlSync": false
      }
    ]
  },
  "annotations": { "list": [] },
  "panels": [
    {
      "type": "text",
      "title": "",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 0 },
      "id": 1,
      "transparent": true,
      "options": {
        "mode": "html",
        "content": "<div style=\"display: flex; justify-content: space-between; align-items: center; padding: 14px 24px; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif;\">\n  <div>\n    <span style=\"font-size: 18px; font-weight: 600; color: #1a1a1a;\">Visualization Sandbox</span>\n    <span style=\"font-size: 13px; color: #666; margin-left: 16px;\">Create charts from your data</span>\n  </div>\n  <a href=\"/d/lindas-description?var-cube=${cube:raw}\" style=\"color: #1565c0; text-decoration: none; font-size: 14px;\">&#8592; Back to dataset details</a>\n</div>"
      }
    },
    {
      "type": "table",
      "title": "Dataset - Source Data",
      "description": "This is the master data table. Other panels can reference this data using the Dashboard datasource.",
      "gridPos": { "h": 14, "w": 24, "x": 0, "y": 2 },
      "id": 100,
      "datasource": {
        "type": "flandersmake-sparql-datasource",
        "uid": "lindas-datasource"
      },
      "targets": [
        {
          "refId": "A",
          "queryText": "${query}"
        }
      ],
      "transformations": [
        {
          "id": "groupingToMatrix",
          "options": {
            "columnField": "column",
            "rowField": "obs",
            "valueField": "value"
          }
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": { "align": "auto", "cellOptions": { "type": "auto" }, "inspect": true, "filterable": true },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "obs" }, "properties": [{ "id": "custom.hidden", "value": true }] }
        ]
      },
      "options": {
        "showHeader": true,
        "cellHeight": "sm",
        "footer": { "show": true, "reducer": ["count"], "countRows": true, "fields": "" }
      }
    },
    {
      "type": "barchart",
      "title": "Bar Chart (uses Dashboard data)",
      "description": "This chart uses data from the Source Data table above. Edit to customize which columns to display.",
      "gridPos": { "h": 10, "w": 12, "x": 0, "y": 16 },
      "id": 101,
      "datasource": {
        "type": "datasource",
        "uid": "-- Dashboard --"
      },
      "targets": [
        {
          "refId": "A",
          "panelId": 100
        }
      ],
      "transformations": [
        {
          "id": "groupBy",
          "options": {
            "fields": {}
          }
        }
      ],
      "options": {
        "orientation": "horizontal",
        "barRadius": 0.1,
        "xTickLabelRotation": 0,
        "showValue": "auto",
        "stacking": "none",
        "groupWidth": 0.7,
        "barWidth": 0.9,
        "tooltip": { "mode": "single" },
        "legend": { "showLegend": false }
      },
      "fieldConfig": {
        "defaults": {
          "mappings": [],
          "color": { "mode": "palette-classic" }
        },
        "overrides": []
      }
    },
    {
      "type": "table",
      "title": "Available Dimensions",
      "description": "Column names and their predicate URIs for building custom queries.",
      "gridPos": { "h": 10, "w": 12, "x": 12, "y": 16 },
      "id": 7,
      "datasource": {
        "type": "flandersmake-sparql-datasource",
        "uid": "lindas-datasource"
      },
      "targets": [
        {
          "refId": "A",
          "queryText": "${dimensionsQuery}"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": { "align": "auto", "cellOptions": { "type": "auto" }, "inspect": true, "filterable": true },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "column_name" }, "properties": [{ "id": "displayName", "value": "Column Name" }, { "id": "custom.width", "value": 150 }] },
          { "matcher": { "id": "byName", "options": "data_type" }, "properties": [{ "id": "displayName", "value": "Type" }, { "id": "custom.width", "value": 80 }] },
          { "matcher": { "id": "byName", "options": "predicate_uri" }, "properties": [{ "id": "displayName", "value": "Predicate URI" }] }
        ]
      },
      "options": {
        "showHeader": true,
        "cellHeight": "sm",
        "footer": { "show": true, "reducer": ["count"], "countRows": true, "fields": "" }
      }
    },
    {
      "type": "text",
      "title": "How to Use This Dashboard",
      "gridPos": { "h": 6, "w": 24, "x": 0, "y": 26 },
      "id": 20,
      "options": {
        "mode": "markdown",
        "content": "## Working with the Data\n\n**The Source Data table (panel ID 100) contains all observations from the cube.** Other panels can reference this data without re-running the query.\n\n### To create a new visualization:\n1. Click **Add** > **Visualization**\n2. Select **-- Dashboard --** as the data source\n3. Choose **Panel: Dataset - Source Data** to use the pre-loaded data\n4. Use **Transformations** to filter, aggregate, or reshape the data\n5. Configure your visualization settings\n\n### Tips:\n- Use **Group by** transformation to aggregate data for charts\n- Use **Filter by value** to focus on specific data\n- Use **Reduce** to calculate statistics\n- The **Available Dimensions** table shows all column names and types"
      }
    }
  ],
  "time": { "from": "now-1y", "to": "now" },
  "timepicker": { "hidden": true },
  "version": 1
}
