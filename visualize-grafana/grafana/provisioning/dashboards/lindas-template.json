{
  "uid": "lindas-template",
  "title": "LINDAS Dataset Explorer",
  "description": "Template dashboard for exploring LINDAS RDF datasets via SPARQL. Select a cube and create visualizations.",
  "tags": ["lindas", "sparql", "template"],
  "editable": true,
  "schemaVersion": 39,
  "style": "light",
  "timezone": "browser",
  "templating": {
    "list": [
      {
        "name": "cube",
        "type": "textbox",
        "label": "Cube IRI",
        "description": "The IRI of the LINDAS cube to query",
        "current": { "text": "", "value": "" },
        "hide": 0,
        "skipUrlSync": false
      }
    ]
  },
  "annotations": { "list": [] },
  "panels": [
    {
      "type": "text",
      "title": "",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 0 },
      "id": 1,
      "transparent": true,
      "options": {
        "mode": "html",
        "content": "<div style=\"display: flex; justify-content: space-between; align-items: center; padding: 14px 24px; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif;\">\n  <div>\n    <span style=\"font-size: 18px; font-weight: 600; color: #1a1a1a;\">Visualization Sandbox</span>\n    <span style=\"font-size: 13px; color: #666; margin-left: 16px;\">Create charts from your data</span>\n  </div>\n  <a href=\"/d/lindas-description?var-cube=${cube:raw}\" style=\"color: #1565c0; text-decoration: none; font-size: 14px;\">&#8592; Back to dataset details</a>\n</div>"
      }
    },
    {
      "type": "table",
      "title": "Dataset Observations",
      "description": "All observations from the cube with their properties. Click Edit to modify the query or add filters.",
      "gridPos": { "h": 16, "w": 24, "x": 0, "y": 2 },
      "id": 10,
      "datasource": {
        "type": "flandersmake-sparql-datasource",
        "uid": "lindas-datasource"
      },
      "targets": [
        {
          "refId": "A",
          "queryText": "PREFIX cube: <https://cube.link/>\nPREFIX schema: <http://schema.org/>\n\nSELECT ?obs ?column ?value WHERE {\n  <${cube}> cube:observationSet/cube:observation ?obs .\n  ?obs ?property ?rawValue .\n  FILTER(?property != <http://www.w3.org/1999/02/22-rdf-syntax-ns#type>)\n  FILTER(?property != cube:observedBy)\n  \n  OPTIONAL { ?rawValue schema:name ?label . FILTER(LANG(?label) = \"en\" || LANG(?label) = \"\") }\n  BIND(COALESCE(?label, IF(isLiteral(?rawValue), STR(?rawValue), REPLACE(STR(?rawValue), \"^.*/\", \"\"))) AS ?value)\n  BIND(REPLACE(STR(?property), \"^.*/\", \"\") AS ?column)\n}\nORDER BY ?obs ?column"
        }
      ],
      "transformations": [
        {
          "id": "groupingToMatrix",
          "options": {
            "columnField": "column",
            "rowField": "obs",
            "valueField": "value"
          }
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": { "align": "auto", "cellOptions": { "type": "auto" }, "inspect": true, "filterable": true },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "obs" }, "properties": [{ "id": "custom.hidden", "value": true }] }
        ]
      },
      "options": {
        "showHeader": true,
        "cellHeight": "sm",
        "footer": { "show": true, "reducer": ["count"], "countRows": true, "fields": "" }
      }
    },
    {
      "type": "table",
      "title": "Available Dimensions",
      "description": "Column names and their predicate URIs for building custom queries.",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 18 },
      "id": 7,
      "datasource": {
        "type": "flandersmake-sparql-datasource",
        "uid": "lindas-datasource"
      },
      "targets": [
        {
          "refId": "A",
          "queryText": "PREFIX cube: <https://cube.link/>\nPREFIX sh: <http://www.w3.org/ns/shacl#>\nPREFIX schema: <http://schema.org/>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n\nSELECT \n  (COALESCE(?label, REPLACE(STR(?dimension), \"^.*/\", \"\")) AS ?column_name)\n  (IF(BOUND(?dt), REPLACE(STR(?dt), \"^.*#\", \"\"), \"IRI/text\") AS ?data_type)\n  (STR(?dimension) AS ?predicate_uri)\nWHERE {\n  <${cube}> cube:observationConstraint/sh:property ?prop .\n  ?prop sh:path ?dimension .\n  OPTIONAL { ?prop schema:name ?label . FILTER(LANG(?label) = \"en\" || LANG(?label) = \"\") }\n  OPTIONAL { ?prop sh:datatype ?dt . }\n  FILTER(?dimension != cube:observedBy)\n  FILTER(?dimension != <http://www.w3.org/1999/02/22-rdf-syntax-ns#type>)\n}\nORDER BY ?column_name"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": { "align": "auto", "cellOptions": { "type": "auto" }, "inspect": true, "filterable": true },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "column_name" }, "properties": [{ "id": "displayName", "value": "Column Name" }, { "id": "custom.width", "value": 150 }] },
          { "matcher": { "id": "byName", "options": "data_type" }, "properties": [{ "id": "displayName", "value": "Type" }, { "id": "custom.width", "value": 80 }] },
          { "matcher": { "id": "byName", "options": "predicate_uri" }, "properties": [{ "id": "displayName", "value": "Predicate URI" }] }
        ]
      },
      "options": {
        "showHeader": true,
        "cellHeight": "sm",
        "footer": { "show": true, "reducer": ["count"], "countRows": true, "fields": "" }
      }
    },
    {
      "type": "text",
      "title": "How to Create Charts",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 18 },
      "id": 20,
      "options": {
        "mode": "markdown",
        "content": "## Create Your Visualization\n\n1. **Add a new panel**: Click \"Add\" button in the top menu\n\n2. **Select visualization**: Choose Bar chart, Time series, Pie chart, etc.\n\n3. **Write a SPARQL query** using predicates from the dimensions table:\n```sparql\nPREFIX cube: <https://cube.link/>\nPREFIX schema: <http://schema.org/>\nSELECT ?label (SUM(?val) AS ?total)\nWHERE {\n  <${cube}> cube:observationSet/cube:observation ?obs .\n  ?obs <DIMENSION_URI> ?dim .\n  ?obs <VALUE_URI> ?val .\n  ?dim schema:name ?label .\n}\nGROUP BY ?label\n```\n\n4. **Save**: Use Share > Export to save as JSON"
      }
    }
  ],
  "time": { "from": "now-1y", "to": "now" },
  "timepicker": { "hidden": true },
  "version": 1
}
